# =============================================================================
# Backend Environment Variables
# Copy this file to .env and fill in your values
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# Option 1: Use DATABASE_URL (recommended for production)
# Format: postgres://username:password@host:port/database
#
# ⚠️  IMPORTANT FOR VERCEL SERVERLESS:
# Serverless functions create many concurrent connections. You need a database
# with connection pooling. Options:
#
# 1. Neon (RECOMMENDED - free tier includes pooling):
#    DATABASE_URL=postgres://user:pass@ep-xxx.region.aws.neon.tech/dbname?sslmode=require
#
# 2. Supabase (free tier with Supavisor pooling):
#    DATABASE_URL=postgres://postgres.xxx:pass@aws-0-region.pooler.supabase.com:6543/postgres
#
# 3. Aiven with PgBouncer (paid plans only):
#    DATABASE_URL=postgres://avnadmin:pass@host.aivencloud.com:6543/defaultdb?sslmode=require
#
# ❌ Aiven FREE tier does NOT include PgBouncer - will exhaust 20 connections quickly!

# Aiven CA Certificate (required for production)
# Copy the content of ca.pem from Aiven Console and paste as a single line
# Or set this in Vercel environment variables
# DATABASE_CA_CERT="-----BEGIN CERTIFICATE-----\n...\n-----END CERTIFICATE-----"

# Option 2: Use individual variables (for local development)
# If DATABASE_URL is set, these are ignored
# DB_HOST=localhost
# DB_PORT=5432
# DB_USERNAME=postgres
# DB_PASSWORD=postgres
# DB_NAME=learnix
# DB_SSL=false

# -----------------------------------------------------------------------------
# JWT Configuration
# -----------------------------------------------------------------------------
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRATION=1d

# -----------------------------------------------------------------------------
# OAuth Configuration - Google
# Get these from: https://console.cloud.google.com/apis/credentials
# -----------------------------------------------------------------------------
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_CALLBACK_URL=http://localhost:3000/auth/google/callback

# -----------------------------------------------------------------------------
# OAuth Configuration - GitHub App (Modern)
# Create a GitHub App at: https://github.com/settings/apps
# Under "Identifying and authorizing users" section:
#   - Enable "Request user authorization (OAuth) during installation"
#   - Set Callback URL to your callback endpoint
# Required permissions: Account permissions > Email addresses (Read-only)
# -----------------------------------------------------------------------------
GITHUB_APP_CLIENT_ID=your-github-app-client-id
GITHUB_APP_CLIENT_SECRET=your-github-app-client-secret
GITHUB_CALLBACK_URL=http://localhost:3000/auth/github/callback

# -----------------------------------------------------------------------------
# Email SMTP Configuration (for sending activation emails)
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@example.com
SMTP_PASS=your-password
SMTP_FROM="Learnix <noreply@learnix.com>"

# -----------------------------------------------------------------------------
# Frontend URL (for OAuth redirects and CORS)
# -----------------------------------------------------------------------------
# For local development: http://localhost:5173
# For Docker Compose: http://localhost
FRONTEND_URL=http://localhost:5173

# -----------------------------------------------------------------------------
# Backend URL (for file upload URLs)
# -----------------------------------------------------------------------------
BACKEND_URL=http://localhost:3000

# -----------------------------------------------------------------------------
# Upload Configuration
# -----------------------------------------------------------------------------
UPLOAD_PATH=./uploads

# -----------------------------------------------------------------------------
# Google Gemini API Configuration (for AI Quiz Generator)
# Get from: https://aistudio.google.com/apikey
# -----------------------------------------------------------------------------
GEMINI_API_KEY=your-gemini-api-key-here

# -----------------------------------------------------------------------------
# Node Environment
# -----------------------------------------------------------------------------
NODE_ENV=development
